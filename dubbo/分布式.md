# 						Dubbo

### 一、Dubbo介绍

#### 1、什么是Dubbo

​	RPC：远程过程调用，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的通信协议

​	高性能、轻量级的开源Java RPC框架。

- **Dubbo是一个基于RPC的分布式服务框架。**
- **高性能和透明化的RPC远程服务调用方案**
- **SOA服务治理方案**

特点：

1. 面向接口代理的高性能RPC调用
2. 服务自动注册与发现
3. 运行期流量调度：灰度发布。
4. 智能负载均衡：内置多种负载均衡策略
5. 高度可扩展能力
6. 可视化的服务治理与运维

#### 2、核心部分

- **远程通讯:** 提供对多种基于长连接的NIO框架抽象封装，包括多种线程模型，序列化，以及“请求-响应”模式的信息交换方式。
- **集群容错:** 提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持。
- **自动发现:** 基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器。	

#### 3、Dubbo能做什么

1. **透明化的远程方法调用，**就像调用本地方法一样调用远程方法，只需简单配置，没有任何API侵入。     
2. **软负载均衡及容错机制，**可在内网替代F5等硬件负载均衡器，降低成本，减少单点。
3. **服务自动注册与发现，**不再需要写死服务提供方地址，注册中心基于接口名查询服务提供者的IP地址，并且能够平滑添加或删除服务提供者。

#### 4、Dubbo架构

##### 	一、**节点角色说明：**

1. **Provider：**服务提供者。暴露服务的提供方
2. **Consumer：**服务消费者。调用远程服务的消费方
3. **Registry：**服务注册与发现的注册中心。**Zookeeper**
4. **Monitor：**统计服务调用相关的监控中心
5. **Container：**服务运行容器

   ![img](http://img.blog.csdn.net/20131224140734734)	

​	

#### 5、Dubbo的xml配置

##### 	1、生产者（Provider）

​	常用配置

- ```xml
  <dubbo:application name="" /> 											:指定当前服务/应用名称
  ```

- ```xml
  <dubbo:registry protocol="zookeeper" address="192.168.50.162:2181" /> 
  <dubbo:registry address="zookeeper://192.168.50.162:2181"/> 			:指定zookeeper注册中心地址
  ```

- ```xml
  <dubbo:protocol name="dubbo" port="20881"  />   						：指定协议和端口 dubbo   也可以是rmi、hessian、redis。。等
  ```

- ```xml
  <dubbo:service interface="com.zzs.gmall.service.UserService" ref="userService" />    ：提供的服务（接口）
  ```

- ```xml
  <dubbo:monitor protocol="registry"/>									：监控中心
  ```

##### 	2、消费者（Consumer）

- ```xml
  <dubbo:application name="" /> 											:指定当前服务/应用名称
  ```

- ```xml
  <dubbo:registry protocol="zookeeper" address="192.168.50.162:2181" /> 
  <dubbo:registry address="zookeeper://192.168.50.162:2181"/> 			:指定zookeeper注册中心地址
  ```

- ```xml
  <dubbo:reference interface="com.zzs.gmall.service.UserService" id="userService"/>：声明服务引用的注册中心的接口
  ```









# 						Zookeeper

### 一、Zookeeper介绍

#### 1、什么是Zookeeper

​	一种分布式协调服务。

​	一个基于观察者模式设计的分布式服务管理框架。

​	**这个分布式协调的本质是：分布式锁**

#### 2、特点

1. 一个领导者（Leader），多个跟随者（Follower）组成的集群
2. 集群中只要有半数以上节点存活，Zookeeper集群就能正常服务
3. 全局数据一致（单一视图）：每个Server保存一份相同的数据副本，Client无论连哪个Server数据都是一致的
4. 顺序一致性：从同一个客户端发起的事务请求，最终将会严格按照其发起顺序依次执行
5. 数据更新原子性：一次数据更新，集群中所有Server要都成功要么都失败
6. 可靠性：每次对Zookeeper的操作状态都会保存在服务端
7. 实时性：在一定时间范围内，Client客户端读取Zookeeper服务器的最新数据

#### 3、数据结构

非常类似于linux文件系统。整体上可以看做是一棵树，每个节点称作一个ZNode。每个ZNode默认存储1MB数据。

每个ZNode拥有唯一的路径。这个路径就是ZNode的唯一标识

![img](https://img-blog.csdn.net/20180624171432213?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppbmcxODAzMzYxMjA1Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)	



![img](https://img-blog.csdn.net/20180624172014284?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppbmcxODAzMzYxMjA1Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)	



#### 4、提供服务（功能）

​	统一命名服务、统一配置管理、统一集群管理、服务器节点动态上下线、软负载均衡等。

​	**1、统一命名服务：**分布式环境下，需对应用/服务进行统一命名，便于识别。

​	**2、统一配置管理：**分布式环境下，配置文件同步管理；配置管理交给Zookeeper实现（将配置信息Zookeeper上的一个ZNode，其他服务器监听这个ZNode，一旦其数据被修改，Zookeeper将通知其他服务器）

​	**3、统一集群管理：**实时掌握每个节点的状态。

​	**4、服务器节点动态上下线：**当某台服务器宕机或者上线。Zookeeper集群会通知客户端

​	**5、软负载均衡：**Zookeeper记录每台服务器的处理请求数，让最少的去处理最新的客户端发起的请求

#### 5、配置参数





















































# 						RabbitMQ

​						